<div class="flex flex-col gap-4 rounded border p-4">
  <app-card>
    @for (item of items(); track item.id) {
    <ng-container
      [ngTemplateOutlet]="itemTemplate"
      [ngTemplateOutletContext]="{ $implicit: item, level: 0 }"
    ></ng-container>
    }
  </app-card>
  <div class="text-xs rounded flex gap-2 items-center">
    <span>Selected item IDs:</span>
    {{ selectedItemIds().join(", ") || "None" }}
  </div>
  <app-button
    class="self-end"
    [disabled]="!selectedItemIds.length"
    (click)="clearSelection()"
    >Clear Selection</app-button
  >
</div>

<ng-template #itemTemplate let-item let-level="level">
  <app-checkbox
    [item]="item"
    [level]="level"
    (toggleExpanded)="onToggleExpanded($event)"
    (toggleSelected)="onToggleSelected($event)"
  >
  </app-checkbox>
  @if (item.children && item.expanded) { @for (child of item.children; track
  child.id) {
  <ng-container
    [ngTemplateOutlet]="itemTemplate"
    [ngTemplateOutletContext]="{ $implicit: child, level: level + 1 }"
  ></ng-container>
  } }
</ng-template>
