<div
  class="flex items-center justify-between hover:bg-hover cursor-default py-1"
  [style.padding-left.px]="level * 20"
  (click)="onToggleSelected()"
>
  <div class="flex items-center w-full px-2">
    @if (isFolder(item)) {
    <div class="flex justify-between w-full items-center">
      <div class="flex items-center">
        <input
          type="checkbox"
          [checked]="item.selectedState === 'all'"
          [indeterminate]="item.selectedState === 'partial'"
          (click)="$event.stopPropagation()"
          (change)="onToggleSelected()"
          class="mr-2"
          [attr.aria-label]="'Toggle folder: ' + item.title"
        />
        <span class="font-medium">{{ item.title }}</span>
      </div>
      <button
        (click)="onToggleExpanded(); $event.stopPropagation()"
        class="w-4 h-4 flex items-center justify-center text-gray-600 hover:text-gray-800"
        [attr.aria-label]="item.expanded ? 'Collapse folder' : 'Expand folder'"
      >
        {{ item.expanded ? "▲" : "▼" }}
      </button>
    </div>
    } @else {
    <input
      type="checkbox"
      [checked]="item.selected"
      (click)="$event.stopPropagation()"
      (change)="onToggleSelected()"
      class="mr-2"
      [attr.aria-label]="'Toggle item: ' + item.title"
    />
    <span>{{ item.title }}</span>
    }
  </div>
</div>

@if (isFolder(item) && item.expanded && item.children) { @for (child of
item.children; track child.id) {
<app-checkbox
  [item]="child"
  [level]="level + 1"
  (toggleExpanded)="toggleExpanded.emit($event)"
  (toggleSelected)="toggleSelected.emit($event)"
>
</app-checkbox>
} }
